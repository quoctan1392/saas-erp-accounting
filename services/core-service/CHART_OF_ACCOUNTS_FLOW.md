# Chart of Accounts - API Flow Diagram

## GET /chart-of-accounts/custom - Request Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT REQUEST                           â”‚
â”‚  GET http://localhost:3003/api/chart-of-accounts/custom        â”‚
â”‚  Authorization: Bearer JWT_TOKEN                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      JWT AUTH GUARD                              â”‚
â”‚  âœ“ Validate token                                               â”‚
â”‚  âœ“ Extract tenantId from payload                                â”‚
â”‚  âœ“ Extract userId from payload                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CHART OF ACCOUNTS CONTROLLER                        â”‚
â”‚  @Controller('chart-of-accounts')                               â”‚
â”‚  @UseGuards(JwtAuthGuard)                                       â”‚
â”‚                                                                  â”‚
â”‚  @Get('custom')                                                 â”‚
â”‚  findCustomAccounts(@TenantId() tenantId: string) {            â”‚
â”‚    return this.chartOfAccountsService.findCustomAccounts(       â”‚
â”‚      tenantId                                                   â”‚
â”‚    );                                                           â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CHART OF ACCOUNTS SERVICE                           â”‚
â”‚                                                                  â”‚
â”‚  async findCustomAccounts(tenantId: string) {                  â”‚
â”‚    return this.customAccountRepository.find({                  â”‚
â”‚      where: { tenantId, isDeleted: false },                    â”‚
â”‚      order: { accountNumber: 'ASC' }                           â”‚
â”‚    });                                                          â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      TYPEORM REPOSITORY                          â”‚
â”‚  Repository<ChartOfAccountsCustom>                              â”‚
â”‚                                                                  â”‚
â”‚  Query Builder:                                                 â”‚
â”‚  SELECT * FROM chart_of_accounts_custom                         â”‚
â”‚  WHERE tenant_id = $1 AND is_deleted = false                   â”‚
â”‚  ORDER BY account_number ASC                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      POSTGRESQL DATABASE                         â”‚
â”‚  Database: core_db                                              â”‚
â”‚  Table: chart_of_accounts_custom                                â”‚
â”‚                                                                  â”‚
â”‚  Indexes:                                                       â”‚
â”‚  - PRIMARY KEY (id)                                             â”‚
â”‚  - UNIQUE (tenant_id, account_number)                           â”‚
â”‚  - INDEX (tenant_id)                                            â”‚
â”‚                                                                  â”‚
â”‚  Row Level Security: âœ“ Enabled                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         RESPONSE                                 â”‚
â”‚  Status: 200 OK                                                 â”‚
â”‚  Content-Type: application/json                                 â”‚
â”‚                                                                  â”‚
â”‚  Body: [                                                        â”‚
â”‚    {                                                            â”‚
â”‚      "id": "uuid-1",                                            â”‚
â”‚      "tenantId": "tenant-123",                                  â”‚
â”‚      "accountNumber": "111",                                    â”‚
â”‚      "accountName": "Tiá»n máº·t",                                 â”‚
â”‚      "accountNature": "debit",                                  â”‚
â”‚      "accountLevel": 1,                                         â”‚
â”‚      "parentAccountNumber": null,                               â”‚
â”‚      "active": true,                                            â”‚
â”‚      "source": "general",                                       â”‚
â”‚      "hasTransactions": false,                                  â”‚
â”‚      ...                                                        â”‚
â”‚    },                                                           â”‚
â”‚    ...                                                          â”‚
â”‚  ]                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Database Schema Visualization

```
chart_of_accounts_custom
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column                    â”‚ Type         â”‚ Required â”‚ Default â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                        â”‚ UUID         â”‚ âœ“        â”‚ gen()   â”‚
â”‚ tenant_id                 â”‚ UUID         â”‚ âœ“        â”‚         â”‚ â—„â”€â”€â”€ Tenant Isolation
â”‚ account_number            â”‚ VARCHAR(20)  â”‚ âœ“        â”‚         â”‚ â—„â”€â”€â”€ Unique per tenant
â”‚ account_name              â”‚ VARCHAR(255) â”‚ âœ“        â”‚         â”‚
â”‚ account_nature            â”‚ ENUM         â”‚ âœ“        â”‚         â”‚ (debit/credit/both)
â”‚ account_level             â”‚ INT          â”‚ âœ“        â”‚         â”‚ (1-4)
â”‚ parent_account_number     â”‚ VARCHAR(20)  â”‚          â”‚ NULL    â”‚
â”‚ description               â”‚ TEXT         â”‚          â”‚ NULL    â”‚
â”‚ active                    â”‚ BOOLEAN      â”‚          â”‚ TRUE    â”‚
â”‚ source                    â”‚ VARCHAR(20)  â”‚          â”‚ 'custom'â”‚ (general/custom)
â”‚ characteristics           â”‚ TEXT         â”‚          â”‚ NULL    â”‚
â”‚ has_transactions          â”‚ BOOLEAN      â”‚          â”‚ FALSE   â”‚
â”‚ created_by                â”‚ UUID         â”‚ âœ“        â”‚         â”‚
â”‚ updated_by                â”‚ UUID         â”‚          â”‚ NULL    â”‚
â”‚ created_at                â”‚ TIMESTAMP    â”‚          â”‚ NOW()   â”‚
â”‚ updated_at                â”‚ TIMESTAMP    â”‚          â”‚ NOW()   â”‚
â”‚ is_deleted                â”‚ BOOLEAN      â”‚          â”‚ FALSE   â”‚ â—„â”€â”€â”€ Soft Delete
â”‚ deleted_at                â”‚ TIMESTAMP    â”‚          â”‚ NULL    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Constraints:
  PK: id
  UNIQUE: (tenant_id, account_number)
  CHECK: account_nature IN ('debit', 'credit', 'both')
  CHECK: source IN ('general', 'custom')

Indexes:
  idx_chart_custom_tenant (tenant_id)                    â—„â”€â”€â”€ Fast tenant lookup
  idx_chart_custom_number (account_number)               â—„â”€â”€â”€ Fast number search
  idx_chart_custom_parent (parent_account_number)        â—„â”€â”€â”€ Hierarchy queries
```

## Account Hierarchy Example

```
Chart of Accounts Structure (Tree View)
========================================

1. TÃ€I Sáº¢N (Assets)
   â”œâ”€â”€ 11. Tiá»n vÃ  cÃ¡c khoáº£n tÆ°Æ¡ng Ä‘Æ°Æ¡ng tiá»n
   â”‚   â”œâ”€â”€ 111. Tiá»n máº·t (Level 1, source: general)
   â”‚   â”‚   â”œâ”€â”€ 1111. Tiá»n máº·t VND (Level 2, source: custom)
   â”‚   â”‚   â””â”€â”€ 1112. Tiá»n máº·t USD (Level 2, source: custom)
   â”‚   â”‚
   â”‚   â””â”€â”€ 112. Tiá»n gá»­i ngÃ¢n hÃ ng (Level 1, source: general)
   â”‚       â”œâ”€â”€ 1121. TK VCB - HN (Level 2, source: custom)
   â”‚       â”œâ”€â”€ 1122. TK Vietinbank - HCM (Level 2, source: custom)
   â”‚       â””â”€â”€ 1123. TK ACB - DN (Level 2, source: custom)
   â”‚
   â”œâ”€â”€ 15. HÃ ng tá»“n kho
   â”‚   â”œâ”€â”€ 151. NguyÃªn liá»‡u, váº­t liá»‡u (Level 1, source: general)
   â”‚   â”œâ”€â”€ 152. CÃ´ng cá»¥, dá»¥ng cá»¥ (Level 1, source: general)
   â”‚   â””â”€â”€ 156. HÃ ng hÃ³a (Level 1, source: general)
   â”‚       â”œâ”€â”€ 1561. HÃ ng Ä‘iá»‡n tá»­ (Level 2, source: custom)
   â”‚       â”œâ”€â”€ 1562. HÃ ng gia dá»¥ng (Level 2, source: custom)
   â”‚       â””â”€â”€ 1563. HÃ ng thá»i trang (Level 2, source: custom)

2. NGUá»’N Vá»N (Equity & Liabilities)
   â”œâ”€â”€ 33. CÃ´ng ná»£ pháº£i tráº£
   â”‚   â”œâ”€â”€ 331. Pháº£i tráº£ cho ngÆ°á»i bÃ¡n (Level 1, source: general)
   â”‚   â””â”€â”€ 333. Thuáº¿ vÃ  cÃ¡c khoáº£n pháº£i ná»™p (Level 1, source: general)

3. CHI PHÃ (Expenses)
   â”œâ”€â”€ 51. Doanh thu
   â”‚   â”œâ”€â”€ 511. Doanh thu bÃ¡n hÃ ng (Level 1, source: general)
   â”‚   â”‚   â”œâ”€â”€ 5111. DT bÃ¡n hÃ ng ná»™i Ä‘á»‹a (Level 2, source: custom)
   â”‚   â”‚   â””â”€â”€ 5112. DT bÃ¡n hÃ ng xuáº¥t kháº©u (Level 2, source: custom)
```

## Business Rules Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ACCOUNT CREATION RULES                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Rule 1: Account Number Uniqueness
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Create 1111 â”‚ â”€â”€â–º Check existing â”€â”€â–º âœ“ Not exists â”€â”€â–º Create
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â–º âœ— Exists â”€â”€â–º ConflictException

Rule 2: Account Level Hierarchy
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Parent: 111 (L1) â”‚
  â”‚ Child: 1111 (L2) â”‚ â”€â”€â–º L2 = L1 + 1? â”€â”€â–º âœ“ Valid â”€â”€â–º Create
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â–º âœ— Invalid â”€â”€â–º BadRequestException

Rule 3: Soft Delete Protection
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Delete account â”‚ â”€â”€â–º hasTransactions? â”€â”€â–º âœ“ Yes â”€â”€â–º BadRequestException
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â–º âœ— No â”€â”€â–º Soft Delete (isDeleted=true)

Rule 4: General Account Protection
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Update/Delete 111  â”‚ â”€â”€â–º source = 'general'? â”€â”€â–º âœ“ Yes â”€â”€â–º BadRequestException
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â–º âœ— No â”€â”€â–º Allow

Rule 5: Tenant Isolation
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Query account â”‚ â”€â”€â–º WHERE tenant_id = JWT.tenantId â”€â”€â–º Always enforced
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      (Row Level Security)
```

## Caching Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         REDIS CACHE                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cache Key Pattern:
  tenant:{tenantId}:chart-of-accounts

Cache Flow:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Request â”‚ â”€â”€â–º â”‚ Redis â”‚ â”€â”€â–º â”‚ Database â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚              â”‚  â–²             â”‚
       â”‚              â”‚  â”‚             â”‚
       â–¼              â–¼  â”‚             â–¼
    Hit? â”€â”€â–º Yes â”€â”€â–º Return cached data
       â”‚                               â”‚
       â””â”€â–º No â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
                              Query DB + Cache result
                              TTL: 30 minutes

Cache Invalidation (on mutation):
  - POST /chart-of-accounts/custom        â”€â”€â–º Invalidate cache
  - PUT /chart-of-accounts/custom/:id     â”€â”€â–º Invalidate cache
  - DELETE /chart-of-accounts/custom/:id  â”€â”€â–º Invalidate cache
  - POST /chart-of-accounts/initialize    â”€â”€â–º Invalidate cache
```

## Integration with Other Modules

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MODULE INTEGRATION DIAGRAM                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Chart of Accounts       â”‚
                    â”‚ (Core Module)           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚               â”‚               â”‚
                â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Bank Accounts   â”‚ â”‚ Warehouses  â”‚ â”‚ Opening      â”‚
    â”‚                 â”‚ â”‚             â”‚ â”‚ Balance      â”‚
    â”‚ - Create TK 112xâ”‚ â”‚ - Link 15x  â”‚ â”‚ - Link all   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                   â”‚               â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Accounting Entries    â”‚
            â”‚ (Journal Entries)     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary

âœ… **API Endpoint**: `GET /chart-of-accounts/custom` is fully implemented  
âœ… **Database**: PostgreSQL with proper schema and indexes  
âœ… **Security**: JWT Auth + Tenant isolation (RLS)  
âœ… **Validation**: DTO validation + business rules  
âœ… **Performance**: Indexed queries + caching strategy  
âœ… **Integration**: Works with other modules (Bank Accounts, Warehouses, etc.)

**Status**: Production Ready ğŸš€
